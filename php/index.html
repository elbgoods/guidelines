<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP | Elbgoods Guidelines</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/prism-nord-theme.css">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.4116429e.css" as="style"><link rel="preload" href="/assets/js/app.4f03c926.js" as="script"><link rel="preload" href="/assets/js/3.acff0c7f.js" as="script"><link rel="preload" href="/assets/js/12.4519a4ed.js" as="script"><link rel="prefetch" href="/assets/js/10.4aad67a2.js"><link rel="prefetch" href="/assets/js/11.f37de6b1.js"><link rel="prefetch" href="/assets/js/13.10491b2a.js"><link rel="prefetch" href="/assets/js/14.63d88379.js"><link rel="prefetch" href="/assets/js/15.40b7dc8c.js"><link rel="prefetch" href="/assets/js/4.3b9287ec.js"><link rel="prefetch" href="/assets/js/5.7cea1c0c.js"><link rel="prefetch" href="/assets/js/6.75a239b9.js"><link rel="prefetch" href="/assets/js/7.6a438b8a.js"><link rel="prefetch" href="/assets/js/8.76f8a2e7.js"><link rel="prefetch" href="/assets/js/9.64995bfe.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.72c12505.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4116429e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Elbgoods Guidelines</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/php/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  PHP
</a></div><div class="nav-item"><a href="/db/" class="nav-link">
  DB
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/planning/" class="nav-link">
  Planning
</a></div> <a href="https://github.com/elbgoods/guidelines" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/php/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  PHP
</a></div><div class="nav-item"><a href="/db/" class="nav-link">
  DB
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/planning/" class="nav-link">
  Planning
</a></div> <a href="https://github.com/elbgoods/guidelines" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/php/" aria-current="page" class="active sidebar-link">PHP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#psrs" class="sidebar-link">PSRs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#namespaces-and-autoloading" class="sidebar-link">Namespaces and Autoloading</a></li><li class="sidebar-sub-header"><a href="/php/#coding-style" class="sidebar-link">Coding Style</a></li></ul></li><li class="sidebar-sub-header"><a href="/php/#oop" class="sidebar-link">OOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#solid-code" class="sidebar-link">SOLID code</a></li><li class="sidebar-sub-header"><a href="/php/#types" class="sidebar-link">Types</a></li><li class="sidebar-sub-header"><a href="/php/#docblocks" class="sidebar-link">Docblocks</a></li><li class="sidebar-sub-header"><a href="/php/#imports" class="sidebar-link">Imports</a></li></ul></li><li class="sidebar-sub-header"><a href="/php/#helpers" class="sidebar-link">Helpers</a></li><li class="sidebar-sub-header"><a href="/php/#naming" class="sidebar-link">Naming</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#namespaces" class="sidebar-link">Namespaces</a></li><li class="sidebar-sub-header"><a href="/php/#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/php/#properties" class="sidebar-link">Properties</a></li><li class="sidebar-sub-header"><a href="/php/#methods" class="sidebar-link">Methods</a></li><li class="sidebar-sub-header"><a href="/php/#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/php/#variables" class="sidebar-link">Variables</a></li><li class="sidebar-sub-header"><a href="/php/#array-keys" class="sidebar-link">Array Keys</a></li><li class="sidebar-sub-header"><a href="/php/#macro-methods" class="sidebar-link">Macro Methods</a></li><li class="sidebar-sub-header"><a href="/php/#test-cases" class="sidebar-link">Test Cases</a></li><li class="sidebar-sub-header"><a href="/php/#enums" class="sidebar-link">Enums</a></li></ul></li><li class="sidebar-sub-header"><a href="/php/#conditions" class="sidebar-link">Conditions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#if-statements" class="sidebar-link">IF statements</a></li><li class="sidebar-sub-header"><a href="/php/#early-return" class="sidebar-link">early return</a></li><li class="sidebar-sub-header"><a href="/php/#happy-path" class="sidebar-link">happy path</a></li><li class="sidebar-sub-header"><a href="/php/#avoid-else" class="sidebar-link">avoid else</a></li><li class="sidebar-sub-header"><a href="/php/#complex-conditions" class="sidebar-link">complex conditions</a></li><li class="sidebar-sub-header"><a href="/php/#condition-negation" class="sidebar-link">condition negation</a></li><li class="sidebar-sub-header"><a href="/php/#negated-instance-checking" class="sidebar-link">negated instance checking</a></li><li class="sidebar-sub-header"><a href="/php/#indirect-boolean-casting" class="sidebar-link">indirect boolean casting</a></li><li class="sidebar-sub-header"><a href="/php/#type-safe-comparison" class="sidebar-link">type safe comparison</a></li><li class="sidebar-sub-header"><a href="/php/#ternary-operators" class="sidebar-link">ternary operators</a></li></ul></li><li class="sidebar-sub-header"><a href="/php/#strings" class="sidebar-link">Strings</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#early-casting-transforming" class="sidebar-link">early casting/transforming</a></li></ul></li><li class="sidebar-sub-header"><a href="/php/#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/#compact" class="sidebar-link">compact()</a></li></ul></li></ul></li><li><a href="/php/laravel/" class="sidebar-link">Laravel</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php"><a href="#php" class="header-anchor">#</a> PHP</h1> <p>All general PHP guidelines <strong>MUST</strong> be followed as long as not overridden by a more precise guideline scope.</p> <h2 id="psrs"><a href="#psrs" class="header-anchor">#</a> PSRs</h2> <h3 id="namespaces-and-autoloading"><a href="#namespaces-and-autoloading" class="header-anchor">#</a> Namespaces and Autoloading</h3> <p>Namespaces, directories and autoloading <strong>MUST</strong> follow <a href="https://www.php-fig.org/psr/psr-4/" target="_blank" rel="noopener noreferrer">PSR-4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="coding-style"><a href="#coding-style" class="header-anchor">#</a> Coding Style</h3> <p>The PHP code style <strong>MUST</strong> follow <a href="https://www.php-fig.org/psr/psr-1/" target="_blank" rel="noopener noreferrer">PSR-1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.php-fig.org/psr/psr-2/" target="_blank" rel="noopener noreferrer">PSR-2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; <a href="https://www.php-fig.org/psr/psr-12/" target="_blank" rel="noopener noreferrer">PSR-12<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - the higher PSR can override the lower ones.</p> <h2 id="oop"><a href="#oop" class="header-anchor">#</a> OOP</h2> <p>Every PHP code <strong>SHOULD</strong> be written in classes, traits, interfaces to be OOP compatible.</p> <h3 id="solid-code"><a href="#solid-code" class="header-anchor">#</a> SOLID code</h3> <p>Every PHP code <strong>SHOULD</strong> follow the <a href="https://en.wikipedia.org/wiki/SOLID" target="_blank" rel="noopener noreferrer">SOLID<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> principle. You can read more about <a href="https://williamdurand.fr/2013/07/30/from-stupid-to-solid-code/" target="_blank" rel="noopener noreferrer">from STUPID to SOLID code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ul><li><strong>S</strong>ingle Responsibility Principle
<blockquote><p>A class should only have a single responsibility, that is, only changes to one part of the software's specification should be able to affect the specification of the class.</p></blockquote></li> <li><strong>O</strong>pen/Closed Principle
<blockquote><p>Software entities should be open for extension, but closed for modification.</p></blockquote></li> <li><strong>L</strong>iskov Substitution Principle
<blockquote><p>Objects in a program should be replaceable with instances of their subtypes without altering the correctness of that program.</p></blockquote></li> <li><strong>I</strong>nterface Segregation Principle
<blockquote><p>Many client-specific interfaces are better than one general-purpose interface.</p></blockquote></li> <li><strong>D</strong>ependency Inversion Principle
<blockquote><p>One should depend upon abstractions, not concretions.</p></blockquote></li></ul> <h3 id="types"><a href="#types" class="header-anchor">#</a> Types</h3> <p>Every method and function <strong>SHOULD</strong> be type-hinted as much as possible (arguments &amp; return type). This way you <strong>MUST</strong> think twice about mixed types.</p> <h3 id="docblocks"><a href="#docblocks" class="header-anchor">#</a> Docblocks</h3> <ul><li>You <strong>MUST NOT</strong> use docblocks for methods that can be fully type hinted (unless you need a description).</li> <li>You <strong>SHOULD</strong> only add a description when it provides more context than the method signature itself.</li> <li>You <strong>MUST</strong> use full sentences for descriptions, including a period at the end.</li></ul> <h3 id="imports"><a href="#imports" class="header-anchor">#</a> Imports</h3> <ul><li>You <strong>MUST</strong> import <code>use</code> all classes referenced in this document/class at the top of the file.</li> <li>You <strong>MUST</strong> import <code>use</code> global classes - like <code>Closure</code> and <code>Exception</code>.</li> <li>You <strong>SHOULD</strong> alias classes with common naming conflicts by default <code>use GuzzleHttp\Client as GuzzleClient;</code>.</li></ul> <h2 id="helpers"><a href="#helpers" class="header-anchor">#</a> Helpers</h2> <p>Helpers are files with global functions not wrapped inside a class.</p> <ul><li>You <strong>MUST</strong> reduce the amount of helper files to an absolute minimum - in best case a single one or none.</li> <li>Helper functions <strong>MUST</strong> wrap an already available method and <strong>MUST NOT</strong> introduce new logic.</li></ul> <h2 id="naming"><a href="#naming" class="header-anchor">#</a> Naming</h2> <ul><li>You <strong>MUST NOT</strong> use a prefix to indicate it's visibility.</li> <li>You <strong>MUST NOT</strong> use a prefix to indicate it's type.</li></ul> <h3 id="namespaces"><a href="#namespaces" class="header-anchor">#</a> Namespaces</h3> <ul><li>You <strong>MUST</strong> use <code>UpperCamelCase</code> for namespaces.</li> <li>You <strong>MUST</strong> use namespaces for multiple classes instead of a prefix.
<ul><li><code>\AdminUsersController</code> =&gt; <code>\Admin\UsersController</code></li></ul></li> <li>You <strong>MUST</strong> use the namespace as directory path.</li></ul> <h3 id="classes"><a href="#classes" class="header-anchor">#</a> Classes</h3> <ul><li>You <strong>MUST</strong> use <code>UpperCamelCase</code> for class names.</li> <li>You <strong>MUST</strong> use the class name as file name.</li> <li>You <strong>SHOULD</strong> use a suffix even if it's already part of the namespace.
<ul><li><code>\Contracts\User</code> =&gt; <code>\Contracts\UserContract</code></li></ul></li></ul> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <ul><li>You <strong>MUST</strong> use <code>$lowerCamelCase</code> for property names.</li></ul> <h3 id="methods"><a href="#methods" class="header-anchor">#</a> Methods</h3> <ul><li>You <strong>MUST</strong> use <code>lowerCamelCase()</code> for method names.</li> <li>You <strong>MUST</strong> prefix methods with <code>bool</code> return by <code>is</code> or <code>has</code>.</li> <li>You <strong>MUST</strong> prefix getter/accessor methods by <code>get</code>.</li> <li>You <strong>MUST</strong> prefix setter/mutator methods by <code>set</code>.</li></ul> <h3 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h3> <ul><li>You <strong>MUST</strong> use <code>lower_snake_case()</code> for function names.</li> <li>You <strong>MUST</strong> prefix methods with <code>bool</code> return by <code>is_</code> or <code>has_</code>.</li></ul> <h3 id="variables"><a href="#variables" class="header-anchor">#</a> Variables</h3> <ul><li>You <strong>MUST</strong> use <code>$lowerCamelCase</code> for variable names.</li></ul> <h3 id="array-keys"><a href="#array-keys" class="header-anchor">#</a> Array Keys</h3> <ul><li>You <strong>MUST</strong> use <code>lower_snake_case</code> for array keys as long as not <strong>REQUIRED</strong> different by a foreign package or API.</li></ul> <h3 id="macro-methods"><a href="#macro-methods" class="header-anchor">#</a> Macro Methods</h3> <p>Macros are <code>const</code> like methods - for example if you construct a &quot;constant&quot; string from config values.</p> <ul><li>You <strong>MUST</strong> use the default method naming for macros - <code>lowerCamelCase()</code>.</li></ul> <h3 id="test-cases"><a href="#test-cases" class="header-anchor">#</a> Test Cases</h3> <ul><li>You <strong>SHOULD</strong> use following pattern to name your test case methods:
<code>[entity:it]_can_[do_something]{_when_[some_condition]}</code></li></ul> <h3 id="enums"><a href="#enums" class="header-anchor">#</a> Enums</h3> <p>We use <a href="https://github.com/spatie/enum" target="_blank" rel="noopener noreferrer">spatie/enum<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or the <a href="https://github.com/spatie/laravel-enum" target="_blank" rel="noopener noreferrer">spatie/laravel-enum<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> wrapper for Enums in PHP code.</p> <ul><li>You <strong>MUST</strong> use <code>UPPER_SNAKE_CASE</code> for enum naming.</li></ul> <h2 id="conditions"><a href="#conditions" class="header-anchor">#</a> Conditions</h2> <h3 id="if-statements"><a href="#if-statements" class="header-anchor">#</a> IF statements</h3> <p>You <strong>MUST</strong> use curly-brackets for <code>if</code> statements and <strong>MUST NOT</strong> use single line <code>if</code> statements.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$condition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// conditional code</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$condition</span><span class="token punctuation">)</span> <span class="token comment">// conditional code</span>
</code></pre></div><h3 id="early-return"><a href="#early-return" class="header-anchor">#</a> early return</h3> <p>You <strong>SHOULD</strong> use early returns to prevent <a href="#complex-conditions">complex condition</a> blocks and indentation.</p> <h3 id="happy-path"><a href="#happy-path" class="header-anchor">#</a> happy path</h3> <p>Following the <a href="#early-return">early return</a> rule the happy path <strong>SHOULD</strong> be the last return and unindented.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="avoid-else"><a href="#avoid-else" class="header-anchor">#</a> avoid else</h3> <p>Following the <a href="#early-return">early return</a> rule you <strong>SHOULD NOT</strong> use/need an <code>else</code> block.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="complex-conditions"><a href="#complex-conditions" class="header-anchor">#</a> complex conditions</h3> <p>You <strong>SHOULD</strong> use separated <code>if</code> statements instead of complex <code>&amp;&amp;</code> or <code>||</code> joined ones. This increases readability and separated error handling.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="condition-negation"><a href="#condition-negation" class="header-anchor">#</a> condition negation</h3> <p>You <strong>SHOULD NOT</strong> use negation if possible but the <a href="#early-return">early return</a>, <a href="#happy-path">happy path</a> and <a href="#complex-conditions">complex conditions</a> rules <strong>MUST</strong> be respected before.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$index</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$index</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="negated-instance-checking"><a href="#negated-instance-checking" class="header-anchor">#</a> negated instance checking</h3> <p>You <strong>SHOULD</strong> use <code>! is_a()</code> instead of <code>! $class instanceof Class</code> if you have to negate an instance of condition.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_a</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">,</span> MyClass<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$object</span> <span class="token keyword">instanceof</span> <span class="token class-name">MyClass</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="indirect-boolean-casting"><a href="#indirect-boolean-casting" class="header-anchor">#</a> indirect boolean casting</h3> <p>You <strong>SHOULD NOT</strong> use indirect boolean casting. Instead you <strong>SHOULD</strong> use comparison operators, <code>is_xyz()</code> functions or <code>bool_val()</code>.
PHP has some strange type-weak comparisons which we want to avoid: https://www.php.net/manual/de/types.comparisons.php</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">function</span> <span class="token function">hasColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">color</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad</span>
<span class="token keyword">function</span> <span class="token function">hasColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="type-safe-comparison"><a href="#type-safe-comparison" class="header-anchor">#</a> type safe comparison</h3> <p>You <strong>SHOULD</strong> use type safe comparison whenever possible instead of weak comparison.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token keyword">return</span> <span class="token variable">$isAccepted</span> <span class="token operator">===</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$foo</span> <span class="token operator">===</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">===</span> <span class="token constant">null</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">===</span> <span class="token constant">null</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">===</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>bool<span class="token punctuation">)</span> <span class="token variable">$isAccepted</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$foo</span> <span class="token operator">==</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ternary-operators"><a href="#ternary-operators" class="header-anchor">#</a> ternary operators</h3> <p>You <strong>MUST</strong> place every portion of a ternary expression on its own line and start with the operator unless it's a simple and short expression.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$object</span> <span class="token keyword">instanceof</span> <span class="token class-name">Model</span>
    <span class="token operator">?</span> <span class="token variable">$object</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span>
    <span class="token punctuation">:</span> <span class="token single-quoted-string string">'A default value'</span><span class="token punctuation">;</span>

<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$isFoo</span> <span class="token operator">?</span> <span class="token single-quoted-string string">'foo'</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$object</span> <span class="token keyword">instanceof</span> <span class="token class-name">Model</span> <span class="token operator">?</span> <span class="token variable">$object</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">'A default value'</span><span class="token punctuation">;</span>

<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$object</span> <span class="token keyword">instanceof</span> <span class="token class-name">Model</span> <span class="token operator">?</span>
    <span class="token variable">$object</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span> <span class="token punctuation">:</span>
    <span class="token single-quoted-string string">'A default value'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="strings"><a href="#strings" class="header-anchor">#</a> Strings</h2> <h3 id="early-casting-transforming"><a href="#early-casting-transforming" class="header-anchor">#</a> early casting/transforming</h3> <p>You <strong>MUST</strong> cast a <code>string</code> as early as possible to another type if it's only a &quot;wrapper&quot; used in DB, form or wherever.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// good</span>
<span class="token variable">$agbAccepted</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'agb_accepted'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token single-quoted-string string">'yes'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$agbAccepted</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AgbNotAcceptedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$model</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">agb_accepted</span> <span class="token operator">=</span> <span class="token variable">$agbAccepted</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'agb_accepted'</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token single-quoted-string string">'yes'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AgbNotAcceptedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$model</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">agb_accepted</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'agb_accepted'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token single-quoted-string string">'yes'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <h3 id="compact"><a href="#compact" class="header-anchor">#</a> compact()</h3> <ul><li>You <strong>MUST</strong> use explicit array definitions in business logic.</li> <li>You <strong>SHOULD</strong> use <code>compact()</code> in test classes - for example to generate routes with model params.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/elbgoods/guidelines/edit/master/docs/php/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-02-11 09:04</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/php/laravel/">
        Laravel
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4f03c926.js" defer></script><script src="/assets/js/3.acff0c7f.js" defer></script><script src="/assets/js/12.4519a4ed.js" defer></script>
  </body>
</html>
